function(i,n,o){x.default._validateParameters("loadImage",arguments);var a=new x.default.Image(1,1,this),s=this,e=new Request(i,{method:"GET",mode:"cors"});return fetch(i,e).then(function(e){var t=e.headers.get("content-type");if(null===t&&console.warn("The image you loaded does not have a Content-Type header. If you are using the online editor consider reuploading the asset."),t&&t.includes("image/gif"))e.arrayBuffer().then(function(e){e&&function(e,r,t,i,n){var o=new p.default.GifReader(e);r.width=r.canvas.width=o.width,r.height=r.canvas.height=o.height;var a=[],s=o.numFrames(),l=new Uint8ClampedArray(r.width*r.height*4);if(1<s){for(var u=function(e,t){try{t.decodeAndBlitFrameRGBA(e,l)}catch(e){x.default._friendlyFileLoadError(8,r.src),"function"==typeof i?i(e):console.error(e)}},h=0;h<s;h++){var c=o.frameInfo(h);1===o.frameInfo(h).disposal&&0<h?r.drawingContext.putImageData(a[h-1].image,0,0):(r.drawingContext.clearRect(0,0,r.width,r.height),l=new Uint8ClampedArray(r.width*r.height*4)),u(h,o);var f=new ImageData(l,r.width,r.height);r.drawingContext.putImageData(f,0,0),a.push({image:r.drawingContext.getImageData(0,0,r.width,r.height),delay:10*c.delay})}var d=o.loopCount();null===d?d=1:0===d&&(d=null),r.gifProperties={displayIndex:0,loopLimit:d,loopCount:0,frames:a,numFrames:s,playing:!0,timeDisplayed:0}}"function"==typeof t&&t(r);n()}(new Uint8Array(e),a,n,o,function(e){s._decrementPreload()}.bind(s))},function(e){"function"==typeof o?o(e):console.error(e)});else{var r=new Image;r.onload=function(){a.width=a.canvas.width=r.width,a.height=a.canvas.height=r.height,a.drawingContext.drawImage(r,0,0),a.modified=!0,"function"==typeof n&&n(a),s._decrementPreload()},r.onerror=function(e){x.default._friendlyFileLoadError(0,r.src),"function"==typeof o?o(e):console.error(e)},0!==i.indexOf("data:image/")&&(r.crossOrigin="Anonymous"),r.src=i}a.modified=!0}),a}